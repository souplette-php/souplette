{#
    @see https://html.spec.whatwg.org/multipage/parsing.html#cdata-section-end-state
#}
{% import 'tokenizer/_macros.php.twig' as h -%}

if ($cc === ']') {
    // Emit a U+005D RIGHT SQUARE BRACKET character token.
    $this->tokenQueue->enqueue(new Character(']'));
    {{ h.advance_to('CDATA_SECTION_END') }}
} elseif ($cc === '>') {
    // Switch to the data state.
    {{ h.advance_to('DATA') }}
} else {
    // Emit two U+005D RIGHT SQUARE BRACKET character tokens.
    $this->tokenQueue->enqueue(new Character(']]'));
    // Reconsume in the CDATA section state.
    {{ h.reconsume_in('CDATA_SECTION') }}
}
